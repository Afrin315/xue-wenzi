(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(31)},20:function(e,t,n){},21:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),o=n.n(l),i=(n(20),n(3)),c=n(1),s=n(5),u=n(4),p=n(6),m=(n(21),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=e.target.value;n.props.onChange(t)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.sort;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"sort-menu",className:"mr-1 f6"},"Sort:"),r.a.createElement("select",{id:"sort-menu",className:"form-select input-sm",value:e,onChange:this.onChange},r.a.createElement("option",{value:"date"},"Date"),r.a.createElement("option",{value:"pinyin"},"Pinyin"),r.a.createElement("option",{value:"translation"},"Translation"),r.a.createElement("option",{value:"type"},"Type")))}}]),t}(a.Component)),d=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className;return"string"!==typeof t||t.trim().length<1?null:r.a.createElement("span",{className:n},"noun"===t?r.a.createElement("span",null,"n."):"verb"===t?r.a.createElement("span",null,"v."):"adjective"===t?r.a.createElement("span",null,"adj."):"adverb"===t?r.a.createElement("span",null,"adv."):"pronoun"===t?r.a.createElement("span",null,"pro."):r.a.createElement("span",null,t))}}]),t}(a.Component),f=n(10),h=n.n(f),v=n(12),y=n(9);function b(e,t){return g.apply(this,arguments)}function g(){return(g=Object(v.a)(h.a.mark(function e(t,n){var a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){var t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=function(){t=speechSynthesis.getVoices(),e(t)}});case 2:return a=e.sent,r=a.filter(function(e){return e.lang===t}),e.abrupt("return",new Promise(function(e){e(r[n])}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).speak=Object(v.a)(h.a.mark(function e(){var t,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.value,a=new SpeechSynthesisUtterance(t),"zh-CN",e.next=5,b("zh-CN",0);case 5:a.voice=e.sent,speechSynthesis.speak(a);case 7:case"end":return e.stop()}},e,this)})),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return speechSynthesis?r.a.createElement("button",{type:"button",className:this.props.className,onClick:this.speak},r.a.createElement(y.a,{icon:"play-circle"})):null}}]),t}(a.Component),w=(n(29),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.translation,a=e.type,l=e.pinyin,o=e.editWord,i=e.deleteWord;return r.a.createElement("li",{className:"word-list-item mb-3 d-flex f3 flex-items-start"},r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-items-center lh-condensed"},t,r.a.createElement(E,{value:t,className:"btn-link mx-1 f6 v-align-middle"}),n?r.a.createElement("span",{className:"d-inline-block ml-2"},n):null,r.a.createElement(d,{type:a,className:"ml-2 text-gray f5"})),r.a.createElement("div",null,r.a.createElement("span",{className:"Label f5 Label--gray"},l),r.a.createElement("div",{className:"f6 show-on-hover ml-3"},r.a.createElement("button",{type:"button",onClick:o,className:"btn-link link-gray"},r.a.createElement(y.a,{icon:"pen"})),r.a.createElement("button",{type:"button",onClick:i,className:"btn-link link-gray ml-3"},r.a.createElement(y.a,{icon:"trash"}))))))}}]),t}(a.Component));var O=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.words,a=t.onSortChange,l=t.sort,o=t.wordTypeFilter,i=n.length,c=Math.ceil(i/2),s=n.slice(0,c),u=n.slice(c,i),p=function(e,t){if("all"===t)return 1===e?"word or phrase":"words ".concat(e<1?"or":"and"," phrases");var n=t;return"measure"===t&&(n="measure word"),"".concat(n).concat(1===e?"":"s")}(i,o);return r.a.createElement("div",null,r.a.createElement("div",{className:"border-bottom pb-2 d-flex flex-items-center flex-justify-between mb-2"},r.a.createElement("h2",{className:"text-normal f3"},i," ",p),i>0?r.a.createElement(m,{sort:l,onChange:a}):null),n.length>0?r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"col-6 float-left"},r.a.createElement("ul",null,s.map(function(t){return r.a.createElement(w,Object.assign({},t,{key:t.value,editWord:function(){return e.props.editWord(t)},deleteWord:function(){return e.props.deleteWord(t)}}))}))),u.length>0?r.a.createElement("div",{className:"col-6 float-left"},r.a.createElement("ul",null,u.map(function(t){return r.a.createElement(w,Object.assign({},t,{key:t.value,editWord:function(){return e.props.editWord(t)},deleteWord:function(){return e.props.deleteWord(t)}}))}))):null):r.a.createElement("p",null,"You haven't added any learned words or phrases yet."))}}]),t}(a.Component),j=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getJSON",value:function(){if(!window.localStorage)return console.error("browser does not support local storage"),{};var e=window.localStorage.getItem("xue-wenzi")||"{}";return JSON.parse(e)}},{key:"has",value:function(e){return"undefined"!==typeof this.get(e)}},{key:"get",value:function(e){return this.getJSON()[e]}},{key:"set",value:function(e,t){var n=this.getJSON();n[e]=t,window.localStorage.setItem("xue-wenzi",JSON.stringify(n))}},{key:"delete",value:function(e){var t=this.getJSON();delete t[e],window.localStorage.setItem("xue-wenzi",JSON.stringify(t))}}]),e}(),N={"\u4f60\u597d":{value:"\u4f60\u597d",pinyin:"n\u01d0 h\u01ceo",translation:"hello",type:"greeting"}},k=function(){function e(t){Object(i.a)(this,e),this.value=t.value,this.translation=t.translation,this.pinyin=t.pinyin,this.type=t.type}return Object(c.a)(e,null,[{key:"findAll",value:function(t){var n=j.get("words")||N,a=Object.values(n).map(function(t){return new e(t)});return"date"===t?a.reverse():a.sort(function(e,n){var a=e[t],r=n[t];return a<r?-1:a>r?1:0})}}]),Object(c.a)(e,[{key:"delete",value:function(){var e=j.get("words")||{};delete e[this.value],j.set("words",e)}},{key:"save",value:function(){var e=j.get("words")||{};e[this.value]={value:this.value,translation:this.translation,pinyin:this.pinyin,type:this.type},j.set("words",e)}}]),e}(),C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){var t=e.target.value;n.props.onChange(t)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"type-field",className:"mb-1 d-block no-wrap"},"Word or phrase type:"),r.a.createElement("select",{id:"type-field",onChange:this.onChange,value:this.props.type,className:"form-select"},r.a.createElement("option",null,"Choose a type"),r.a.createElement("optgroup",{label:"Words"},r.a.createElement("option",{value:"noun"},"noun"),r.a.createElement("option",{value:"verb"},"verb"),r.a.createElement("option",{value:"adjective"},"adjective"),r.a.createElement("option",{value:"adverb"},"adverb"),r.a.createElement("option",{value:"pronoun"},"pronoun"),r.a.createElement("option",{value:"measure"},"measure")),r.a.createElement("optgroup",{label:"Phrases"},r.a.createElement("option",{value:"greeting"},"greeting"),r.a.createElement("option",{value:"idiom"},"idiom"),r.a.createElement("option",{value:"phrase"},"phrase"))))}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onValueChange=function(e){var t=e.target.value;n.setState(function(e){return{value:t}})},n.onPinyinChange=function(e){var t=e.target.value;n.setState(function(e){return{pinyin:t}})},n.onTranslationChange=function(e){var t=e.target.value;n.setState(function(e){return{translation:t}})},n.onTypeChange=function(e){n.setState(function(t){return{type:e}})},n.save=function(e){e.preventDefault();var t=n.state.value.trim(),a=n.state.pinyin.trim(),r=n.state.type,l=n.state.translation.trim();new k({value:t,pinyin:a,type:r,translation:l}).save(),n.props.onSave(),n.setState(function(e){return{value:"",pinyin:"",type:"",translation:""}})},n.state={value:e.value||"",translation:e.translation||"",pinyin:e.pinyin||"",type:e.type||""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;e.value!==this.props.value&&this.setState(function(e){return{value:t.props.value}}),e.type!==this.props.type&&this.setState(function(e){return{type:t.props.type}}),e.translation!==this.props.translation&&this.setState(function(e){return{translation:t.props.translation}}),e.pinyin!==this.props.pinyin&&this.setState(function(e){return{pinyin:t.props.pinyin}})}},{key:"render",value:function(){var e=this.props.value.length<1,t=this.state,n=t.value,a=t.type,l=t.pinyin,o=t.translation;return r.a.createElement("form",{onSubmit:this.save,className:"ml-6"},r.a.createElement("h2",{className:"text-gray f6 mb-2"},"Add a word or phrase"),r.a.createElement("div",{className:"form-group mt-0"},r.a.createElement("label",{htmlFor:"word-field",className:"mb-1 d-block no-wrap"},"Chinese word or phrase:"),e?r.a.createElement("div",{className:n.length>0?"input-group":""},r.a.createElement("input",{type:"text",required:!0,id:"word-field",className:"form-control",onChange:this.onValueChange,value:n,placeholder:"e.g., \u4e66"}),n.length>0?r.a.createElement("span",{class:"input-group-button"},r.a.createElement(E,{value:n,className:"btn"})):null):r.a.createElement("div",null,r.a.createElement("span",null,n),r.a.createElement(E,{value:n,className:"btn-link ml-2"}))),r.a.createElement(C,{type:a,onChange:this.onTypeChange}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pinyin-field",className:"mb-1 d-block no-wrap"},"Pinyin:"),r.a.createElement("input",{type:"text",required:!0,id:"pinyin-field",placeholder:"e.g., sh\u016b",className:"form-control",onChange:this.onPinyinChange,value:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"translation-field",className:"mb-1 d-block no-wrap"},"English translation:"),r.a.createElement("input",{type:"text",placeholder:"e.g., book",id:"translation-field",className:"form-control",onChange:this.onTranslationChange,value:o})),r.a.createElement("button",{className:"btn",type:"submit"},"Save"))}}]),t}(a.Component),W=(n(30),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).changeFilter=function(e){n.props.filterWordsByType(e.target.value)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.wordTypesAndCounts,a=t.activeFilter,l=Object.keys(n).sort(),o=Object.values(n).reduce(function(e,t){return e+t});return r.a.createElement("div",null,r.a.createElement("h3",{className:"f6 text-gray mb-2"},"Filter words"),r.a.createElement("ul",{className:"filter-list"},r.a.createElement("li",null,r.a.createElement("button",{value:"all",type:"button",className:"btn-link width-full text-left filter-item".concat("all"===a?" selected":""),onClick:this.changeFilter},r.a.createElement("span",{className:"count",title:"words"},o),"All")),l.map(function(t){var l=a===t;return r.a.createElement("li",{key:t},r.a.createElement("button",{value:t,type:"button",className:"btn-link width-full text-left filter-item".concat(l?" selected":""),onClick:e.changeFilter},r.a.createElement("span",{className:"count",title:"words"},n[t]),t))})))}}]),t}(a.Component));var x=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).export=function(){var e=n.props.words,t=JSON.stringify(e),a=new Blob([t],{type:"application/octet-stream"}),r=URL.createObjectURL(a),l=document.createElement("a"),o=function(e){var t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0".concat(n));var a=e.getDate();return a<10&&(a="0".concat(a)),"".concat(t,"-").concat(n,"-").concat(a)}(new Date),i=document.createEvent("MouseEvents");l.setAttribute("href",r),l.setAttribute("download","chinese-vocabulary-".concat(o,".json")),i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),l.dispatchEvent(i)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{type:"button",onClick:this.export,className:"btn-link header-link"},"Export")}}]),t}(a.Component),T=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onFileLoaded=function(e){var t=n.props,a=t.knownWordValues,r=t.onImportComplete,l=e.srcElement.result,o=JSON.parse(l),i=[],c=!0,s=!1,u=void 0;try{for(var p,m=o[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var d=p.value,f=new k(d);(a.length<1||a.indexOf(f.value)<0)&&i.push(f),f.save()}}catch(h){s=!0,u=h}finally{try{c||null==m.return||m.return()}finally{if(s)throw u}}r(i)},n.onFileSelected=function(e){var t=e.target.files[0];if(t){var a=new FileReader;a.addEventListener("loadend",n.onFileLoaded),a.readAsText(t)}},n.import=function(){var e=document.createElement("input");e.type="file",e.addEventListener("change",n.onFileSelected,!1),e.click()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{type:"button",onClick:this.import,className:"btn-link ml-3 header-link"},"Import")}}]),t}(a.Component),F=n(7),A=n(11);F.b.add(A.a),F.b.add(A.b),F.b.add(A.c);var J=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onSortChange=function(e){n.setState(function(t){return{sort:e}},function(){return n.refreshWords()})},n.filterWords=function(e,t){return"all"===t?e:e.filter(function(e){return e.type===t})},n.refreshWords=function(){var e=k.findAll(n.state.sort);n.setState(function(t){return{words:e,visibleWords:n.filterWords(e,n.state.wordTypeFilter)}})},n.editWord=function(e){n.setState(function(t){return{editingPinyin:e.pinyin,editingTranslation:e.translation,editingValue:e.value,editingType:e.type}})},n.deleteWord=function(e){window.confirm("Are you sure you want to delete ".concat(e.value," (").concat(e.translation,")?"))&&(e.delete(),n.refreshWords())},n.onWordSave=function(){n.refreshWords(),n.setState(function(e){return{editingPinyin:"",editingTranslation:"",editingValue:"",editingType:""}})},n.changeWordTypeFilter=function(e){n.setState(function(t){return{wordTypeFilter:e,visibleWords:n.filterWords(n.state.words,e)}})},n.flashNotice=function(e){n.setState(function(t){return{notice:e}},function(){window.setTimeout(function(){n.setState(function(e){return{notice:""}})},3e3)})},n.importedWords=function(e){if(!(e.length<1)){n.refreshWords();var t=e.map(function(e){return e.value}).join(", ");n.flashNotice("Imported: ".concat(t))}},n.state={words:[],visibleWords:[],sort:"date",editingValue:"",editingTranslation:"",editingType:"",editingPinyin:"",wordTypeFilter:"all",notice:""},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.refreshWords()}},{key:"render",value:function(){var e=this.state,t=e.words,n=e.sort,a=e.editingPinyin,l=e.editingType,o=e.visibleWords,i=e.editingTranslation,c=e.editingValue,s=e.wordTypeFilter,u=e.notice,p=function(e){var t={},n=!0,a=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value;i.type in t||(t[i.type]=0),t[i.type]++}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}(t);return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("header",{className:"app-header mb-3"},r.a.createElement("div",{className:"container-lg pb-2 d-flex flex-items-end flex-justify-between"},r.a.createElement("h1",{className:"pt-4 app-title"},"\u5b66\u6587\u5b57"),u.length>0?r.a.createElement("h2",null,u):null,r.a.createElement("div",null,t.length>0?r.a.createElement(x,{words:t}):null,r.a.createElement(T,{knownWordValues:t.map(function(e){return e.value}),onImportComplete:this.importedWords})))),r.a.createElement("main",{className:"container-lg width-full clearfix"},r.a.createElement("div",{className:"col-2 pr-6 float-left"},t.length>0?r.a.createElement(W,{activeFilter:s,wordTypesAndCounts:p,filterWordsByType:this.changeWordTypeFilter}):null),r.a.createElement("div",{className:"col-7 float-left"},r.a.createElement(O,{wordTypeFilter:s,words:o,sort:n,onSortChange:this.onSortChange,editWord:this.editWord,deleteWord:this.deleteWord})),r.a.createElement("div",{className:"col-3 float-left"},r.a.createElement(S,{onSave:this.onWordSave,pinyin:a,translation:i,value:c,type:l}))),r.a.createElement("footer",{className:"app-footer mt-4"},r.a.createElement("div",{className:"container py-4 f6"},r.a.createElement("a",{className:"link-gray",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/cheshire137/xue-wenzi"},"View source"))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.88b693af.chunk.js.map